# misis2023f-22-01-kozin-v-v


**Имя:** Козин Вячеслав Викторович

**Группа:** БПМ-22-1

---


### Проект: AstMarker
https://github.com/vchkz/astmarker

## **Задачи в проекте:**
- Построение искажённого изображения.
- Функция оценки моделей искажения (аффинной и проективной).


### Построение искажённого изображения
По размеченным парам точек строется искажённое изображение.
 - На основе точек исходного изображения строется триангуляция Делоне.
 - Для каждого треугольника находится матрица преобразования.
 - Область изображения внутри треугольника трансформируется и накладывается в соответствующее место.

![image](https://github.com/vchkz/misis2023f-22-01-kozin-v-v/assets/93995464/5f01185b-9bc7-4b53-a009-7b469a9d0306)

Метод класса Image: <br>
void Image::genWarpImg(const Image &firstSourceImage, const Image &secondSourceImage) - создаёт и загружает в текстуру искажённое изображение.

Параметры: <br>
Image firstSourceImage - Исходное изображение, которое необходимо исказить
Image secondSourceImage - Изображение, к точкам которого будет приводиться исходное.



### Функция оценки моделей искажения
Наложение двух изображений по размеченным точкам, используя RANSAC для нахождения аффинной или проективной матриц преобразования:
- Выбор аффинного или проективного метода трансформации.
- Выброр изображения, которое необходимо трансформировать.
- Минимальное колличество размеченных пар точек - 4.
- Отображение пар точек и соединяющих их линий.
- Настройка размеров точек и соединяющих их линий.
  
![image](https://github.com/vchkz/misis2023f-22-01-kozin-v-v/assets/93995464/8d921832-3932-441e-8d36-97d2d25f73bd)


**Класс ImageEval - наследник класса Image**

**Поля:** <br>
float lineWidth; - Ширина линии, которая соединяет точки

bool showPoints; - Флаг, регулирующий отображение точек

enum modelType {affine, perspective} currentModelType; - Аффинное или проективное преобразование нужно использовать

cv::Mat transformMatrix; - матрица преобразования

**Методы:** <br>
void genEvalImg(const Image &srcImg, const Image &dstImg) - Заполнение матрицы преобразования и создание изображени

Параметры: <br>
Image srcImg - Изображение, которое необходимо трансформировать.
Image secondSourceImage - Изображение, на которое будет накладываться исходное.

void ImageEval::drawEvalPoints(const Asterism& baseAst) - Отрисовка точек на изображении

Параметры: <br>
Asterism baseAst - экземпляр класса Asterism, хранящий точки изображения, на которое происходит наложение.

<br>

**Используемые в проекте библиотеки**
- SFML
- Dear Imgui
- OpenCV
